!function(e){var t=null;function n(){this.events={}}function i(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);1<=r&&r<=126||65376<=r&&r<=65439?t++:t+=2}return t}function r(){if(!((t=this)instanceof r))return new r;var e="https:"==document.location.protocol;this.url=e?"https://www.teameeting.cn":"http://cloud.anyrtc.io:9091";var D=this;this.isAudioMeet=!1,this.videoMode="RTCMeet_Videos_SD",this.defaultConstraints={needCamera:!0,needMicrophone:!0},this.anyrtcId,this.devId="",this.appId="",this.appKey="",this.appToken="",this.Domain="",this.userId="",this.userData="",this.videoTransmission=!0,this.audioTransmission=!0,this.my_id="",this.my_rtcPeerId="",this.seqn=0,this.meetMode=0,this.isHoster=!1,this.anyRTC=new AnyRTC,this.pubChanId=null,this.pubExChanId=null,this.pubRtcPeerID={},this.pubRtcUserdata={},this.peerRtcAVStatus={},this.version="v2.4.1";this.anyRTC.on("stream_created",function(e,t){D.localStream=e,D.emit("onSetLocalVideoCapturerResult",0,t,e)}),this.anyRTC.on("stream_create_error",function(e,t){D.emit("onSetLocalVideoCapturerResult",e,t)}),this.anyRTC.on("onLocalStreamUpdated",function(e,t){D.localStream=t,D.doRePublish(),D.setLocalAudioEnable(D.audioTransmission),D.setLocalVideoEnable(D.videoTransmission),D.emit("onLocalStreamUpdated",t,window.URL.createObjectURL(t))}),this.anyRTC.on("onRemoteStream",function(e,t){var n="";for(var r in D.pubRtcPeerID)if(r==t){n=D.pubRtcPeerID[r];break}D.emit("onRTCRemoteStream",e,n,t)}),this.anyRTC.on("onPeerVideoBytes",function(e,t){D.emit("onRTCPeerVideoBytes",e,t)}),this.anyRTC.on("onPeerAudioDetect",function(e,t){D.emit("onRTCPeerAudioDetect",e,t)}),this.anyRTC.on("onRTCNetworkStatus",function(e,t,n){D.emit("onRTCNetworkStatus",e,t,n)}),this.anyRTC.on("onSendToPeer",function(e,t){D.sendToPeer(e,t)}),this.anyRTC.on("onIceDisconnected",function(e,t,n){e?XMLHttp.sendReq("POST",D.url+"/anyapi/v1/republish?DyncID="+D.my_id+"&AnyrtcID="+D.anyrtcId+"&PubID="+t,null,function(e){}):D.doReSubscribe(t,n)}),this.anyRTC.on("onMemberJoin",function(e){var t;(t=!0===D.isAudioMeet?document.createElement("audio"):document.createElement("video")).style.width="100%",t.style.height="auto",t.autoplay="autoplay";var n="";for(var r in D.pubRtcPeerID)if(r==e){n=D.pubRtcPeerID[r];break}var o="";for(var r in D.pubRtcUserdata)if(r==e){o=D.pubRtcUserdata[r];break}D.emit("onRTCOpenVideoRender",n,e,t,o)}),this.anyRTC.on("onMemberLeave",function(e){var t="";for(var n in D.pubRtcPeerID)if(e==n){t=D.pubRtcPeerID[n];break}D.emit("onRTCCloseVideoRender",t,e)}),this.doJoin=function(){try{D.request=new XMLHttpRequest;var t=D.request;t.onreadystatechange=function(){try{if(4==t.readyState)if(200==t.status){var e=JSON.parse(t.responseText);200==e.Code?(D.my_id=e.DyncID,D.startHangingGet(),D.emit("onRTCJoinMeetOK"),t=null):D.emit("onRTCJoinMeetFailed",e.Code)}else D.emit("onRTCJoinMeetFailed",100)}catch(e){console.log("Error: "+e.description+" e: "+e),D.emit("onRTCJoinMeetFailed",100)}};var e={UserID:D.userId,UserData:D.userData,Domain:D.Domain,MeetMode:D.meetMode,IsHoster:D.isHoster};t.open("POST",D.url+"/anyapi/v1/connect?DeveloperID="+D.devId+"&AppID="+D.appId+"&AnyrtcID="+D.anyrtcId+"&Key="+D.appKey+"&Token="+D.appToken+"&Type=meet",!1),t.send(JSON.stringify(e))}catch(e){console.log("2 error: "+e.description+" e: "+e)}},this.doPublish=function(){if(""!=D.my_id){D.request=new XMLHttpRequest;var t=D.request;t.onreadystatechange=function(){try{if(4==t.readyState)if(200==t.status){var e=JSON.parse(t.responseText);0==e.Code?t=null:console.log("doPublish Error code: "+e.Code)}else console.log("doPublish Error: "+t.status)}catch(e){console.log("doPublish Error: "+e.description+" e: "+e)}};var e=D.isAudioMeet?"1":"0";t.open("GET",D.url+"/anyapi/v1/dopublish?DyncID="+D.my_id+"&Type="+e+"&AnyrtcID="+D.anyrtcId,!1),t.send()}},this.doUnPublish=function(){""!=D.my_id&&null!=D.pubChanId&&(XMLHttp.sendReq("GET",D.url+"/anyapi/v1/dounpublish?DyncID="+D.my_id+"&ChanID="+D.pubChanId,null,function(e){}),D.anyRTC.destroyPublisher(D.pubChanId),D.pubChanId=null)},this.doRePublish=function(e){""!=D.my_id&&null!=D.pubChanId&&XMLHttp.sendReq("POST",D.url+"/anyapi/v1/republish?DyncID="+D.my_id+"&AnyrtcID="+D.anyrtcId+"&PubID="+e,null,function(e){})},this.doPublishEx=function(){if(""!=D.my_id){D.request=new XMLHttpRequest;var t=D.request;t.onreadystatechange=function(){try{if(4==t.readyState)if(200==t.status){var e=JSON.parse(t.responseText);0==e.Code?t=null:console.log("doPublish Error code: "+e.Code)}else console.log("doPublish Error: "+t.status)}catch(e){console.log("doPublish Error: "+e.description+" e: "+e)}},t.open("GET",D.url+"/anyapi/v1/dopublish_ex?DyncID="+D.my_id+"&Type=0&AnyrtcID="+D.anyrtcId,!1),t.send()}},this.doUnPublishEx=function(){if(""!=D.my_id){D.request=new XMLHttpRequest;var e=D.request;e.onreadystatechange=function(){try{4==e.readyState&&200==e.status&&(e=null)}catch(e){console.log("doPublishEx Error: "+e.description+" e: "+e)}},e.open("GET",D.url+"/anyapi/v1/dounpublish_ex?DyncID="+D.my_id+"&Type=0&AnyrtcID="+D.anyrtcId+"&ChanID=x0",!1),e.send()}},this.doSubscribe=function(e,t,n){if(""!=D.my_id){D.request=new XMLHttpRequest;var r=D.request;D.pubRtcPeerID[e]=t,D.pubRtcUserdata[e]=n,D.peerRtcAVStatus[t]&&D.emit("onRTCAVStatus",e,D.peerRtcAVStatus[t].AudioEnable,D.peerRtcAVStatus[t].VideoEnable),r.onreadystatechange=function(){try{if(4==r.readyState)if(200==r.status){console.log(r.responseText);var e=JSON.parse(r.responseText);0==e.Code?r=null:console.log("doSubscribe Error code: "+e.Code)}else console.log("doSubscribe Error: "+r.status)}catch(e){console.log("doSubscribe Error: "+e.description+" e: "+e)}},r.open("GET",D.url+"/anyapi/v1/dosubscribe?DyncID="+D.my_id+"&PubID="+e+"&AnyrtcID="+D.anyrtcId,!1),r.send()}},this.doUnSubscribe=function(e){D.anyRTC.destroySubscriber(e),delete D.pubRtcPeerID[e],delete D.pubRtcUserdata[e]},this.doReSubscribe=function(e,t){var n=D.pubRtcPeerID[e],r=D.pubRtcUserdata[e];D.doUnSubscribe(e),XMLHttp.sendReq("GET",D.url+"/anyapi/v1/dounsubscribe?DyncID="+D.my_id+"&ChanID="+t,null,function(e){}),D.doSubscribe(e,n,r)},this.sendToPeer=function(e,t){XMLHttp.sendReq("POST",D.url+"/anyapi/v1/sdpinfo?DyncID="+D.my_id+"&ChanID="+e,t,function(e){})},this.startHangingGet=function(){if(null==D.hangingGet&&null==D.hangingGet)try{D.hangingGet=new XMLHttpRequest;var g=D.hangingGet;g.timeout=6e4,g.onreadystatechange=function(){try{if(4!=g.readyState)return;if(200!=g.status)0==g.status?(D.hangingGet&&(D.hangingGet.abort(),D.hangingGet=null),""!=D.my_id&&window.setTimeout(D.startHangingGet(),10)):(D.hangingGet=null,console.log("server error: "+g.status));else{var e=JSON.parse(g.responseText);if(null!=e.Msgs)for(var t=e.Msgs,n=0;n<t.length;n++){console.log(t[n]);var r=JSON.parse(t[n]);if(!(r.Seqn<=D.seqn))if(D.seqn=r.Seqn,1001==r.Cmd);else if(1002==r.Cmd)"ok"==r.Params.Result?(D.pubChanId=r.Params.ChanId,D.anyRTC.createPublisher(D.pubChanId,r.Params.DyncerId)):window.setTimeout(function(){XMLHttp.sendReq("POST",D.url+"/anyapi/v1/republish?DyncID="+D.my_id+"&AnyrtcID="+D.anyrtcId+"&PubID=Puber",null,function(e){})},3e3);else if(1003==r.Cmd);else if(1004==r.Cmd){if("ok"==r.Params.Result){var o=JSON.parse(r.Body);D.anyRTC.createSubscriber(r.Params.ChanId,r.Params.PubId,o)}}else if(1005==r.Cmd);else if(1006==r.Cmd){var i=r.Params.ChanId;D.anyRTC.getSdpInfo(i,r.Body)}else if(1007==r.Cmd)"ok"==r.Params.Result&&(D.pubExChanId=r.Params.ChanId,D.anyRTC.createPublisherEx(r.Params.ChanId),D.setUserShareInfo(r.Params.DyncerId));else if(1008==r.Cmd);else if(3001==r.Cmd)if("ok"==r.Params.Result){null!=(o=JSON.parse(r.Body)).RtcPeerID&&(D.my_rtcPeerId=o.RtcPeerID),1==o.Publish&&D.doPublish();var s=o.Pubers;if(0<s.length)for(n=0;n<s.length;n++){var a=s[n];D.doSubscribe(a,o.RtcPeersID[n],o.RtcCustomData[n])}null!=(m=o.RtcUserShare)&&""!==m&&D.emit("onRTCUserShareOpen",m.USType,m.USInfo,m.RtcCustomID,m.RtcUserData);var d=o.RtcPeersID,u=o.PubersAudio,l=o.PubersVideo;if(0<d.length)for(n=0;n<d.length;n++){var c=d[n];for(var p in D.pubRtcPeerID)D.pubRtcPeerID[p]==c&&(i=p);D.emit("onRTCAVStatus",i,u[n],l[n])}}else{o=JSON.parse(r.Body);D.emit("onRTCJoinMeetFailed",o.code)}else if(3002==r.Cmd){if(null==r.Body||0==r.Body.length)return;if("Publish"==(o=JSON.parse(r.Body)).CMD)1==o.Publish?D.doPublish():D.doUnPublish();else if("Subscribe"==o.CMD)1==o.Subscribe?D.doSubscribe(o.Puber,o.RtcPeerID,o.RtcUserData):D.doUnSubscribe(o.Puber);else if("UserMsg"==o.CMD)D.emit("onRTCUserMessage",o.UserName,o.NickName,null==o.HeaderUrl?"":o.HeaderUrl,o.Content);else if("AVSetting"==o.CMD){i=null;for(var y in D.pubRtcPeerID)D.pubRtcPeerID[y]==o.RtcPeerID&&(i=y);i?D.emit("onRTCAVStatus",i,o.AudioEnable,o.VideoEnable):D.peerRtcAVStatus[o.RtcPeerID]={AudioEnable:o.AudioEnable,VideoEnable:o.VideoEnable}}else if("UserShareResult"==o.CMD)D.emit("onRTCSetUserShareEnableResult",o.OK),o.OK;else if("UserShareOpen"==o.CMD){var m;null!=(m=o)&&""!==m&&D.emit("onRTCUserShareOpen",m.USType,m.USInfo,m.RtcCustomID,m.RtcUserData)}else if("UserShareClose"==o.CMD)D.emit("onRTCUserShareClose");else if("MeetNotify"==o.CMD){var f=o.Type,h=o.RtcPeerID;if("HosterOnline"==f)D.emit("onRTCHosterOnline",h,o.RtcCustomID,o.RtcUserData);else if("HosterOffline"==f)D.emit("onRTCHosterOffline",h);else if("TalkOnlyOn"==f){if(D.isHoster)D.anyRTC.setSubscribeFileter(h,!1);else{var b=o.HostPeerID;0==D.my_rtcPeerId.compare(h)?D.anyRTC.setSubscribeFileter(b,!1):D.anyRTC.setSubscribeFileter(b,!0)}D.emit("onRTCTalkOnlyOn",h,o.RtcCustomID,o.RtcUserData)}else 0==strcmp(f,"TalkOnlyOff")&&(D.anyRTC.setSubscribeFileter("",!1),D.emit("onRTCTalkOnlyOff",h))}}}D.hangingGet&&(D.hangingGet.abort(),D.hangingGet=null),""!=D.my_id&&window.setTimeout(D.startHangingGet(),10)}}catch(e){console.log("Hanging get error: "+e.description+" e: "+e)}},console.log("Http "+D.url+"/anyapi/v1/polling?DyncID="+D.my_id+"&Seqn="+D.seqn),g.open("GET",D.url+"/anyapi/v1/polling?DyncID="+D.my_id+"&Seqn="+D.seqn,!0),g.send()}catch(e){console.log("Hanging error "+e.description+" e: "+e)}}}window.onbeforeunload=function(){null!=t&&(t.leaveRTC(),t=null)},n.prototype.on=function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},n.prototype.emit=function(e,t){var n,r,o=this.events[e],i=Array.prototype.slice.call(arguments,1);if(o)for(n=0,r=o.length;n<r;n++)o[n].apply(null,i)},(r.prototype=new n).genRoomId=function(){return Math.random().toString(36).substr(2)},r.prototype.initEngineWithAnyRTCInfo=function(e,t,n,r,o){var i=this;return"string"!=typeof e?(i.emit("onSDKError","initEngineWithAnyRTCInfo",{msg:"type of strDeveloperId is not string"}),!1):"string"!=typeof t?(i.emit("onSDKError","initEngineWithAnyRTCInfo",{msg:"type of strAppId is not string"}),!1):"string"!=typeof n?(i.emit("onSDKError","initEngineWithAnyRTCInfo",{msg:"type of strAppKey is not string"}),!1):"string"!=typeof r?(i.emit("onSDKError","initEngineWithAnyRTCInfo",{msg:"type of strAppToken is not string"}),!1):"string"!=typeof o?(i.emit("onSDKError","initEngineWithAnyRTCInfo",{msg:"type of strDomain is not string"}),!1):(i.devId=e,i.appId=t,i.appKey=n,i.appToken=r,i.Domain=o,!0)},r.prototype.configServerForPriCloud=function(e,t){var n=this;if("string"!=typeof e)return n.emit("onSDKError","configServerForPriCloud",{msg:"type of strAddress is not string."}),!1;var r="https:"==document.location.protocol;return n.url=r?t?"https://"+e+":"+t:"https://"+e:t?"http://"+e+":"+t:"http://"+e,!0},r.prototype.setVideoMode=function(e){var t=this;if("string"!=typeof e)return t.emit("onSDKError","setVideoMode",{msg:"type of strVideoMode is not string."}),!1;switch(e){case"RTCMeet_Videos_Flow":t.VBitrate=128,t.VWidth=320,t.VHeight=240,t.videoMode=e;break;case"RTCMeet_Videos_Low":t.VBitrate=256,t.VWidth=352,t.VHeight=288,t.videoMode=e;break;case"RTCMeet_Videos_SD":t.VBitrate=512,t.VWidth=640,t.VHeight=480,t.videoMode=e;break;case"RTCMeet_Videos_HD":t.VBitrate=1024,t.VWidth=1280,t.VHeight=720,t.videoMode=e;break;case"RTCMeet_Videos_HHD":t.VBitrate=2048,t.VWidth=1920,t.VHeight=1080,t.videoMode=e;break;default:t.VBitrate=512,t.VWidth=640,t.VHeight=480,t.videoMode="RTCMeet_Videos_SD"}return!0},r.prototype.setAudioModel=function(e){return"boolean"!=typeof e?(this.emit("onSDKError","setAudioModel",{msg:"type of bAudioOnly is not boolean."}),!1):(this.isAudioMeet=e,!0)},r.prototype.getSdkVersion=function(){return this.version},r.prototype.setMeetMode=function(e){return 0<=e&&e<=2&&(this.meetMode=e,!0)},r.prototype.setLocalAudioEnable=function(e){var t=this;if("boolean"!=typeof e)return t.emit("onSDKError","setLocalAudioEnable",{msg:"type of bEnable is not boolean."}),!1;var n=t.localStream.getAudioTracks()[0],r=t.localStream.getVideoTracks()[0];if(!n||!r)return t.emit("onSDKError","setLocalAudioEnable",{msg:"Please open the camera first."}),!1;t.audioTransmission=1==e?(n.enabled=!0,n.muted=!0):(n.enabled=!1,n.muted=!1);var o={CMD:"AVSetting",AudioEnable:n.enabled,VideoEnable:r.enabled};return XMLHttp.sendReq("POST",t.url+"/anyapi/v1/meet_avsetting?DyncID="+t.my_id+"&AnyrtcID="+t.anyrtcId,JSON.stringify(o),function(e){}),!0},r.prototype.setLocalVideoEnable=function(e){var t=this;if("boolean"!=typeof e)return t.emit("onSDKError","setLocalVideoEnable",{msg:"type of bEnable is not boolean."}),!1;var n=t.localStream.getAudioTracks()[0],r=t.localStream.getVideoTracks()[0];if(!n||!r)return t.emit("onSDKError","setLocalVideoEnable",{msg:"Please open the camera first."}),!1;t.videoTransmission=1==e?r.enabled=!0:r.enabled=!1;var o={CMD:"AVSetting",AudioEnable:n.enabled,VideoEnable:r.enabled};return XMLHttp.sendReq("POST",t.url+"/anyapi/v1/meet_avsetting?DyncID="+t.my_id+"&AnyrtcID="+t.anyrtcId,JSON.stringify(o),function(e){}),!0},r.prototype.setUserShareEnable=function(e,t){var n=this;if("number"!=typeof e)return n.emit("onSDKError","setUserShareEnable",{msg:"type of nType is not number."}),!1;if("boolean"!=typeof t)return n.emit("onSDKError","setUserShareEnable",{msg:"type of bEnable is not boolean."}),!1;if(""==n.my_id)return n.emit("onSDKError","setUserShareEnable",{msg:"Please try it again after joinRTC success."}),!1;var r={USType:e,Enable:t};return XMLHttp.sendReq("POST",n.url+"/anyapi/v1/meetusershare?DyncID="+n.my_id+"&AnyrtcID="+n.anyrtcId,JSON.stringify(r),function(e){}),!0},r.prototype.setUserShareInfo=function(e){var t=this;if("string"!=typeof e)return t.emit("onSDKError","setUserShareInfo",{msg:"type of strInfo is not string."}),!1;if(""==t.my_id)return t.emit("onSDKError","setUserShareInfo",{msg:"Please try it again after joinRTC success."}),!1;var n={USInfo:e};return XMLHttp.sendReq("POST",t.url+"/anyapi/v1/meetusershare_info?DyncID="+t.my_id+"&AnyrtcID="+t.anyrtcId,JSON.stringify(n),function(e){}),!0},r.prototype.startScreenCap=function(e){var t=this;t.scrnTrack=null,t.anyRTC.scrnMediaStream=e,t.anyRTC.scrnMediaStream.oninactive=function(e){t.emit("onScreenShareClosed"),t.setUserShareEnable(0,!1),t.stopScreenCap()},t.doPublishEx()},r.prototype.stopScreenCap=function(){var e=this;null!=e.pubExChanId&&(e.anyRTC.destroyPublisherEx(e.pubExChanId),e.pubExChanId=null),e.doUnPublishEx()},r.prototype.getDevices=function(t){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(e){var n=[],r=[];e.forEach(function(e,t){"videoinput"===e.kind?n.push({label:e.label?e.label:"摄像头"+(t+1),deviceId:e.deviceId}):"audioinput"===e.kind&&r.push({label:e.label?e.label:"麦克风"+(t+1),deviceId:e.deviceId})}),t({videoinput:n,audioinput:r})}).catch(function(e){console.log(e.name+": "+e.message),t({videoinput:videoinput,audioinput:audioinput})}):console.log("enumerateDevices() not supported.")},r.prototype.switchDevice=function(e,t){var n=this,r=document.createElement("video");n.isAudioMeet&&(r=document.createElement("audio")),n.localStream&&n.localStream.getTracks().forEach(function(e){e.stop()}),Object.assign(n.defaultConstraints,{cameraDeviceId:e,microphoneDeviceId:t}),n.anyRTC.createStream(n.defaultConstraints,n.videoMode,r)},r.prototype.setLocalVideoCapturer=function(){var e=this,t=document.createElement("video");if(0!==arguments.length){if("object"!=typeof arguments[0])return void e.emit("onSDKError","setLocalVideoCapturer",{msg:"the first argument is not object."});e.isAudioMeet&&(arguments[0]&&arguments[0].needCamera&&(arguments[0].needCamera=!1),t=document.createElement("audio")),Object.assign(e.defaultConstraints,arguments[0]),e.anyRTC.createStream(e.defaultConstraints,e.videoMode,t)}else e.isAudioMeet&&(e.defaultConstraints={needCamera:!1,needMicrophone:!0},t=document.createElement("audio")),e.anyRTC.createStream(e.defaultConstraints,e.videoMode,t)},r.prototype.setRTCVideoRender=function(e,t){t?t.srcObject=e:this.emit("onSDKError","setRTCVideoRender",{msg:"dRender is Undefined."})},r.prototype.joinRTC=function(e,t,n,r){var o=this;return"string"!=typeof e?(o.emit("onRTCJoinMeetFailed",4),o.emit("onSDKError","joinRTC",{msg:"type of strAnyRTCId is not string."}),!1):1!=t&&0!=t?(o.emit("onSDKError","joinRTC",{msg:"type of isHoster is not boolean."}),!1):(o.anyrtcId=o.isAudioMeet?"a_"+e:"v_"+e,"string"!=typeof n?(o.emit("onRTCJoinMeetFailed",4),o.emit("onSDKError","joinRTC",{msg:"type of strUserId is not string."}),!1):(o.userId=n,"string"!=typeof r?(o.emit("onRTCJoinMeetFailed",4),o.emit("onSDKError","joinRTC",{msg:"type of strUserData is not string."}),!1):512<i(r)?(o.emit("onRTCJoinMeetFailed",4),o.emit("onSDKError","joinRTC",{msg:"strUserData is out of length."}),!1):(0==o.meetMode?o.isHoster=!1:o.isHoster=t,o.userData=r,o.doJoin(),!0)))},r.prototype.sendUserMessage=function(e,t,n){var r=this;if(null===r.my_id||void 0===r.my_id||""===r.my_id)return r.emit("onSDKError","sendUserMessage",{msg:"Please try it again after joinRTC success."}),!1;if(""===r.userId)return r.emit("onSDKError","sendUserMessage",{msg:"userId is null or length is 0."}),!1;if("string"!=typeof e)return r.emit("onSDKError","sendUserMessage",{msg:"type of strUserName is not string."}),!1;if(256<i(e))return r.emit("onSDKError","sendUserMessage",{msg:"strUserName is out of length."}),!1;if("string"!=typeof t)return r.emit("onSDKError","sendUserMessage",{msg:"type of strUserHeaderUrl is not string."}),!1;if(512<i(t))return r.emit("onSDKError","sendUserMessage",{msg:"strUserHeaderUrl is out of length."}),!1;if("string"!=typeof n)return r.emit("onSDKError","sendUserMessage",{msg:"type of strContent is not string."}),!1;if(1024<i(n))return r.emit("onSDKError","sendUserMessage",{msg:"strContent is out of length"}),!1;var o={NickName:e,Content:n};return XMLHttp.sendReq("POST",r.url+"/anyapi/v1/meetmessage?DyncID="+r.my_id+"&AnyrtcID="+r.anyrtcId+"&UserID="+r.userId+"&Header="+t,JSON.stringify(o),function(e){}),!0},r.prototype.setBroadCast=function(e,t){var n=this;if("string"!=typeof t)return n.emit("onSDKError","setBroadCast",{msg:"type of strRtcPeerId is not string."}),!1;if(0==i(t))return n.emit("onSDKError","setBroadCast",{msg:"strRtcPeerId is empty"}),!1;if("boolean"!=typeof e)return n.emit("onSDKError","setBroadCast",{msg:"type of bEnable is not boolean."}),!1;if(!n.isHoster&&0==i(t))return n.emit("onSDKError","setBroadCast",{msg:"setBroadCast is used for Hoster"}),!1;if(""==n.my_id)return n.emit("onSDKError","setUserShareEnable",{msg:"Please try it again after joinRTC success."}),!1;var r={RtcPeerId:t,Enable:e};return XMLHttp.sendReq("POST",n.url+"/anyapi/v1/meet_broadcast?DyncID="+n.my_id+"&AnyrtcID="+n.anyrtcId,JSON.stringify(r),function(e){}),!0},r.prototype.setTalkOnly=function(e,t){var n=this;if("string"!=typeof t)return n.emit("onSDKError","setTalkOnly",{msg:"type of strRtcPeerId is not string."}),!1;if(0==i(t))return n.emit("onSDKError","setTalkOnly",{msg:"strRtcPeerId is empty"}),!1;if("boolean"!=typeof e)return n.emit("onSDKError","setTalkOnly",{msg:"type of bEnable is not boolean."}),!1;if(!n.isHoster&&0==i(t))return n.emit("onSDKError","setTalkOnly",{msg:"setTalkOnly is used for Hoster"}),!1;if(""==n.my_id)return n.emit("onSDKError","setUserShareEnable",{msg:"Please try it again after joinRTC success."}),!1;var r={RtcPeerId:t,Enable:e};return XMLHttp.sendReq("POST",n.url+"/anyapi/v1/meet_talkonly?DyncID="+n.my_id+"&AnyrtcID="+n.anyrtcId,JSON.stringify(r),function(e){}),!0},r.prototype.leaveRTC=function(){var e=this;if(r.prototype.events={},AnyRTC.prototype.events={},e.localStream&&e.localStream.getTracks().forEach(function(e){e.stop()}),""!=e.my_id){e.request=new XMLHttpRequest;var t=e.request;t.open("GET",e.url+"/anyapi/v1/disconnect?DyncID="+e.my_id,!1),t.send(),e.my_id="",e.anyRTC.destroyAll(),e.pubChanId=null,e.pubExChanId=null,e.pubRtcPeerID={},e.pubRtcUserdata={},e.defaultConstraints={needCamera:!0,needMicrophone:!0}}},e.RTMeetKit=r}(this);